{% extends 'base_admin.html' %}

{% block title %}Oyun Listesi{% endblock %}

{% block content %}
    <div class="header">
        <h1>Mevcut Oyunlar</h1>
        <div class="header-actions">
            <form method="GET" action="{{ url_for('list_games') }}" class="search-bar">
                <input type="text" name="q" placeholder="Oyun adını yazarak ara..." value="{{ search_query or '' }}">
                <button type="submit" class="btn btn-primary search-icon-btn">
                    <i class="fas fa-search"></i>
                </button>
            </form>
            <a href="{{ url_for('add_game') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                Yeni Oyun Ekle
            </a>
        </div>
    </div>
    
    <div class="games-table">
        <table>
            <thead>
                <tr>
                    <th style="width: 60px;">ID</th>
                    <th>Oyun Adı</th>
                    <th style="width: 150px;">Kategori</th>
                    <th style="width: 120px;">İşlemler</th>
                </tr>
            </thead>
            <tbody>
                {% for game in games %}
                <tr>
                    <td>{{ game.id }}</td>
                    <td class="game-name">{{ game.oyun_adi }}</td>
                    <td>
                        <span class="badge badge-{{ 'uncategorized' if not game.category_names else 'default' }}">
                            {{ game.category_names or 'Kategorisiz' }}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="{{ url_for('edit_game', game_id=game.id) }}" class="btn-icon btn-edit" title="Düzenle"><i class="fas fa-edit"></i></a>
                            <form action="{{ url_for('delete_game', game_id=game.id) }}" method="POST" class="actions-form">
                                <button type="submit" class="btn-icon btn-delete" onclick="return confirm('`{{ game.oyun_adi }}` oyununu silmek istediğine emin misin?');" title="Sil"><i class="fas fa-trash"></i></button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}